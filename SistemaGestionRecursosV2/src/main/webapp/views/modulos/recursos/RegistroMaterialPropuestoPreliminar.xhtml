<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:ui="http://xmlns.jcp.org/jsf/facelets"
      xmlns:h="http://xmlns.jcp.org/jsf/html"
      xmlns:f="http://xmlns.jcp.org/jsf/core"
      xmlns:p="http://primefaces.org/ui">

<ui:composition template="/template.xhtml">

    <ui:define name="title">
        <h:outputText value="#{bundle.TITULO_FORM_RMPP}"></h:outputText>
    </ui:define>
    
    <ui:define name="body">  
        <h:form id="RMPP_Form">
            
            <p:fieldset legend="Buscar Malla" style="margin-bottom:20px">
              
                <p:selectOneMenu value="#{recursosXTemaController.tipoBusquedaMalla}">
                    <f:selectItem itemLabel="Código" itemValue="codigo" />
                    <f:selectItem itemLabel="Año" itemValue="anio" />
                </p:selectOneMenu>
                <p:inputText value="#{recursosXTemaController.valorTipoBusquedaMalla}" />        

                <p:commandButton value="Buscar" update=":RMPP_Form:somLstCursos" 
                                 action="#{recursosXTemaController.buscarPorMallaLstCursos()}" />                   
            </p:fieldset>
            
            Listado de Cursos: 
            <p:selectOneMenu id="somLstCursos" value="#{recursosXTemaController.curso}">
                <f:selectItems value="#{recursosXTemaController.lstCursos}" var="curso"
                               itemLabel="#{curso.cursoId.nombre}" itemValue="#{curso.cursoId}" />
                <p:ajax event="change" listener="#{recursosXTemaController.buscarPorCursoUnidadAprendizaje()}"
                        update=":RMPP_Form:dtLstCursos" />
            </p:selectOneMenu>            
            
            <p:separator />
            <h3 style="margin-top:0">Elija la unidad de Aprendizaje a Agregar al Material Propuesto</h3>
                
            <p:dataTable id="dtLstCursos" var="unidadAprendizaje" style="width: 800px;"
                         value="#{recursosXTemaController.lstUnidadAprendizaje}">
                <p:column id="col3">
                    #{unidadAprendizaje.unidadAprendizajeId}
                </p:column>
                <p:column id="col1">
                    #{unidadAprendizaje.nombre}
                </p:column>
                <p:column id="col2">
                    #{unidadAprendizaje.descripcion}
                </p:column>
                <p:column>
                    <p:commandButton value="Buscar"
                                     update=":RMPP_Form:dtTemas"
                                     action="#{recursosXTemaController.buscarPorUnidadAprendizajeTemas()}">
                        <f:setPropertyActionListener 
                            value="#{unidadAprendizaje}" 
                            target="#{recursosXTemaController.unidadAprendizaje}" />
                    </p:commandButton>
                </p:column>
            </p:dataTable>
            <br/><br/>
            <p:separator />
            <h3 style="margin-top:0">Los temas de la Unidad de Aprendizaje son: </h3>
            <p:dataTable id="dtTemas" var="tema" style="width: 800px;"
                         value="#{recursosXTemaController.lstTemas}">
                <p:column>
                    #{tema.codigo}
                </p:column>
                <p:column>
                    #{tema.nombre}
                </p:column>
                <p:column>
                    <p:commandButton value="Buscar"
                                     update=":RMPP_Form:dtVideos :RMPP_Form:dtFotos :RMPP_Form:dtEnlaces"
                                     action="#{recursosXTemaController.buscarPorTemaVideosFotosYEnlaces()}">
                        <f:setPropertyActionListener 
                            value="#{tema}" 
                            target="#{recursosXTemaController.tema}" />
                    </p:commandButton>
                </p:column>
            </p:dataTable>
            <br/><br/>
            <p:dataTable id="dtVideos" var="video" style="width: 200px;float: left;"
                         value="#{recursosXTemaController.lstVideos}">
                <p:column headerText="Video">
                    #{RecursosXTema.descripcion}
                </p:column>

            </p:dataTable>

            <p:dataTable id="dtFotos" var="foto" style="width: 200px;float: left;"
                         value="#{recursosXTemaController.lstFotos}">
                <p:column headerText="Foto">
                    #{RecursosXTema.descripcion}
                </p:column>
            </p:dataTable>

            <p:dataTable id="dtEnlaces" var="enlace" style="width: 200px;float: left;"
                         value="#{recursosXTemaController.lstEnlaces}">
                <p:column headerText="Enlace">
                    #{RecursosXTema.descripcion}
                </p:column>
            </p:dataTable>            
            <br/><br/>
        <!-- BUSQUEDA DE MATERIAL PROPUESTO POR TEMA POR BUSQUEDA SEMANTICA -->
        <p:fieldset legend="Selecciones las opciones de busqueda" style="margin-bottom:20px">
            <br/>
            <p:growl id="growl" life="2000" />
            
            <p:selectManyCheckbox id="basic" value="#{recursosXTemaController.selectedConsoles}">
                <f:selectItem itemLabel="Imagen" itemValue="IMG" />
                <f:selectItem itemLabel="Video" itemValue="VIDEO" />
                <f:selectItem itemLabel="Enlace" itemValue="LINK" />
            </p:selectManyCheckbox>
 

            <p:outputLabel for="tema" value="Tema" />
            <p:inputText id="tema" value="#{recursosXTemaController.temaBuscar}" required="true"
                         requiredMessage="#{bundle.INGRESE_TEMA}"/>            
            
            <p:commandButton value="Buscar" id="sugerencias" icon="ui-icon-search" 
                             action="#{recursosXTemaController.BuscarRecursosSugeridos}" 
                             update="growl" styleClass="ui-priority-primary" />                    
            <br/><br/>
    
            <table style="width: 50%;" cellpadding="2">
                <tbody>
                    <tr style="height: 21px;">
                        <td style="height: 21px;">
                            <div class="contenedor-columna">
                                <p:dataList value="#{recursosXTemaController.arrayrecurso1}" var="recVideo" type="definition">
                                    <f:facet name="header">Imagen</f:facet> 
                                        #{recVideo.url}
                                    <f:facet name="description">
                                        <p:graphicImage name="../../images/mod_recursos/BMW.gif"/> 
                                    </f:facet>
                                </p:dataList>  
                             </div>
                        </td>
                        <td style="height: 21px;">
                            <div class="contenedor-columna">
                                <p:dataList value="#{recursosXTemaController.arrayrecurso2}" var="recImagen" type="definition">
                                    <f:facet name="header">Video</f:facet> 
                                        #{recImagen.url}
                                    <f:facet name="description">
                                        <p:graphicImage name="../../images/mod_recursos/BMW.gif"/> 
                                    </f:facet>
                                </p:dataList>  
                             </div>
                        </td>
                        <td style="height: 21px;">
                            <div class="contenedor-columna">
                                <p:dataList value="#{recursosXTemaController.arrayrecurso3}" var="recEnlaces" type="definition">
                                    <f:facet name="header">Enlaces</f:facet> 
                                        #{recEnlaces.url}
                                    <f:facet name="description">
                                        <p:graphicImage name="../../images/mod_recursos/BMW.gif"/> 
                                    </f:facet>
                                </p:dataList>  
                             </div>
                        </td>
                    </tr>
                </tbody>
            </table>
            <!-- DivTable.com -->
          
        </p:fieldset>        
        <!-- BUSQUEDA DE MATERIAL PROPUESTO POR TEMA POR BUSQUEDA SEMANTICA -->
        
        </h:form>

    </ui:define>
</ui:composition>   
</html>
